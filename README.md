# Breezart Home Assistant Integration

Кастомная интеграция для Home Assistant для систем вентиляции Breezart (JetLogic JL205).  
Использует **нативный TCP-протокол** (порт 1560), а не Modbus.

## Совместимость

- Breezart 550 Aqua и другие модели с контроллером JetLogic JL205
- Требуется подключение контроллера TPD-283U-H к локальной сети
- Активированный режим удалённого управления с паролем

## Возможности

### Сенсоры
| Сенсор | Описание |
|--------|----------|
| Температура подачи | Текущая температура воздуха |
| Температура приточного воздуха | На выходе вентустановки |
| Температура на улице | Наружный воздух |
| Температура теплоносителя | Температура воды в системе |
| Температура в помещении | Если есть датчик |
| Скорость вентилятора | Текущая (0–10) |
| Фактическая скорость | В процентах |
| Потребляемая мощность | Вт |
| Загрязнённость фильтра | % |
| Влажность | % (при наличии датчика) |
| Режим работы | Обогрев / Охлаждение / Авто / Вентиляция |
| Состояние установки | Включено / Выключено / Переходный процесс |

### Управление
| Объект | Описание |
|--------|----------|
| Питание (switch) | Включение / выключение |
| Заданная температура (number) | Установка целевой температуры |
| Скорость вентилятора (number) | Установка скорости 1–10 |

### Бинарные сенсоры
| Сенсор | Описание |
|--------|----------|
| Установка включена | Текущее состояние питания |
| Предупреждение | Есть некритическая ошибка |
| Критическая ошибка | Фатальная ошибка |
| Угроза перегрева | Перегрев калорифера |
| Требуется замена фильтра | Фильтр загрязнён |

## Установка

### Способ 1: HACS (рекомендуется)

1. В HACS → Интеграции → ⋯ → Пользовательские репозитории
2. Добавить: `https://github.com/smirnowegor/Breezart-Home-Assistant-Integration`
3. Категория: **Интеграция**
4. Установить → Перезапустить Home Assistant
5. Настройки → Интеграции → **+ Добавить интеграцию** → Breezart

### Способ 2: Ручная установка

1. Скачать репозиторий
2. Скопировать папку `custom_components/breezart` в `<config>/custom_components/`
3. Перезапустить Home Assistant
4. Настройки → Интеграции → + → Breezart

## Настройка

При добавлении интеграции укажи:
- **Хост**: IP-адрес Breezart (например, `192.168.1.121`)
- **Порт**: `1560` (стандартный, менять не нужно)
- **Пароль**: Пароль из настроек контроллера TPD-283U-H

## Протокол

Интеграция использует нативный TCP-протокол Breezart (порт 1560):
- `VPr07` — получение свойств устройства
- `VSt07` — получение текущего состояния
- `VSens` — получение данных с сенсоров
- `VWPwr` — управление питанием
- `VWTmp` — установка температуры
- `VWSpd` — установка скорости вентилятора

Основан на протоколе из [breezart-client](https://github.com/kovalev-sergey/breezart-client).

## Структура

```
custom_components/breezart/
├── __init__.py           # Основная логика, setup
├── config_flow.py        # UI настройки
├── coordinator.py        # TCP клиент и координатор данных
├── sensor.py             # Сенсоры (температура, скорость, режим...)
├── binary_sensor.py      # Бинарные сенсоры (ошибки, состояние)
├── number.py             # Управление (температура, скорость)
├── switch.py             # Выключатель питания
├── const.py              # Константы протокола
├── manifest.json         # Метаданные HACS
└── translations/         # Переводы (ru, en)
```

## Лицензия

MIT
